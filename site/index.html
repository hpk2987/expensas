<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <title>Expensas</title>

		<link rel="stylesheet" href="/site/bootstrap-3.2.0-dist/css/bootstrap.css">
		<link rel="stylesheet" href="/site/bootstrap-3.2.0-dist/css/bootstrap-theme.css">
		<link rel="stylesheet" href="/site/css/custom.css">

		
		<script src="/site/js/jquery-2.1.1.js" type="text/javascript"></script>
		<script src="/site/bootstrap-3.2.0-dist/js/bootstrap.js" type="text/javascript"></script>	
		<script src="/site/js/jquery.form.js" type="text/javascript"></script>
		<script src="/site/js/mustache.js" type="text/javascript"></script>
		<script src="/site/js/client.js" type="text/javascript"></script>
	</head>
	<body>
		<script type="text/x-mustache" id="cuenta_template">
    		<div class="panel panel-default" id='cuenta_{{_id}}'>
    			<div class="panel-heading">
					<form class="form-inline" id='cuenta_delete{{_id}}' 
		    			  onSubmit='return confirm('Eliminar cuenta?')'>
						<input type='hidden' name='id' value='{{_id}}'/>
						<label><b style="font-size:17px">{{nombre}}</b></label>
						<div style="margin-top:-5px" class="pull-right">
							<button class="btn btn-default glyphicon glyphicon-trash" type="submit">
							</button>
						</div>
					</form>
				</div>
				<div class="panel-body">
	    			<table class="table" id='cuenta_entradas_{{_id}}'>
	    				<thead>
							<th>Fecha</th>
	    					<th>Descripción</th>
	    					<th>Monto</th>
	    				</thead>
	    				<tbody>
	    					{{#entradas}}
							<tr id='entrada_row_{{_id}}'>
								<td>{{fecha}}</td>
								<td>{{descripcion}}</td>
								<td>{{monto}}</td>
								<td>
									<form id='entrada_delete{{_id}}'>
										<input type='hidden' name='id' value='{{_id}}'/>
										<button class="btn btn-default glyphicon glyphicon-minus" type="submit">
									</form>
								</td>
							</tr>
	    					{{/entradas}}    					
	    				</tbody>
	    				<tfoot>
	    					<tr>
								<td></td>
								<td>Total</td>
								<td>{{getTotal}}</td>
							</tr>
	    				</tfoot>
	    			</table>
					<hr>
	    			<form class="form-inline" id='cuenta_newEntry{{_id}}'>
							<input type='hidden' name='idCuenta' value='{{_id}}'/>
							<div class="form-group">							
								<label>Descripción:</label>
								<input class="form-control" type='text' name='desc' value=''/>
							</div>
							<div class="form-group">
								<label>Monto:</label>
								<input class="form-control" type='text' name='monto' value=''/>
							</div>
						<button class="btn btn-default glyphicon glyphicon-plus" type="submit">
						</button>
					</form>
				</div>
			</div>
  		</script>
  		<script type="text/x-mustache" id="entrada_row_template">
			<tr id='entrada_row_{{_id}}'>
				<td>{{fecha}}</td>
				<td>{{descripcion}}</td>
				<td>{{monto}}</td>
				<td>
					<form id='entrada_delete{{_id}}'>
						<input type='hidden' name='id' value='{{_id}}'/>
						<button class="btn btn-default glyphicon glyphicon-minus" type="submit">
					<form>
				</td>
			</tr>
		</script>

		<div class="container">
			<form id="addCuenta" class="form-inline">
				<div class="form-group">
					<label>Nueva cuenta:</label>
					<input class="form-control" type="text" name="nombre"/>
				</div>
				<button class="btn btn-default glyphicon glyphicon-plus" type="submit">
				</button>				
			</form>
			<h4>Cuentas</h4>
			<div id="cuentas"></div>
		</div>
		
	</body>
</html>