<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <title>Expensas</title>

		<link rel="stylesheet" href="/site/css/base.css">
        <link rel="stylesheet" href="/site/css/skeleton.css">
        <link rel="stylesheet" href="/site/css/layout.css">

        <link rel="stylesheet" href="/site/css/custom.css">

        <link rel="stylesheet" href="/site/css/bootstrap-glyphs.css">
		
		<script src="/site/js/jquery-2.1.1.js" type="text/javascript"></script>
		<script src="/site/js/jquery.form.js" type="text/javascript"></script>
		<script src="/site/js/mustache.js" type="text/javascript"></script>
		<script src="/site/js/client.js" type="text/javascript"></script>
	</head>
	<body>
		<script type="text/x-mustache" id="cuenta_template">
    		<div id='cuenta_{{_id}}'>
    			<span>{{nombre}}</span>
    			<table id='cuenta_entradas_{{_id}}'>
    				<thead>
    					<th>Descripción</th>
    					<th>Monto</th>
    				</thead>
    				<tbody>
    					{{#entradas}}
						<tr id='entrada_row_{{_id}}'>
							<td>{{fecha}}</td>
							<td>{{descripcion}}</td>
							<td>{{monto}}</td>
							<td>
								<form id='entrada_delete{{_id}}'>
									<input type='hidden' name='id' value='{{_id}}'/>
									<input type='submit' value='Borrar'/>
								</form>
							</td>
						</tr>
    					{{/entradas}}    					
    				</tbody>
    				<tfoot>
    					<tr>
							<td>Total</td>
							<td>{{getTotal}}</td>
						</tr>
    				</tfoot>
    			</table>

    			<form id='cuenta_newEntry{{_id}}'>
					<fieldset>
						<legend>Nueva entrada</legend>
						<input type='hidden' name='idCuenta' value='{{_id}}'/>
						<label>Descripción</label><input type='text' name='desc' value=''/>
						<label>Monto</label><input type='text' name='monto' value=''/>
					</fieldset>
					<input type='submit' value='Agregar'>
				</form>
	    		<form id='cuenta_delete{{_id}}' 
	    			  onSubmit='return confirm('Eliminar cuenta?')'>
					<input type='hidden' name='id' value='{{_id}}'/>
					<input type='submit' value='Borrar'/>
				</form>
			</div>
  		</script>
  		<script type="text/x-mustache" id="entrada_row_template">
			<tr id='entrada_row_{{_id}}'>
				<td>{{fecha}}</td>
				<td>{{descripcion}}</td>
				<td>{{monto}}</td>
				<td>
					<form id='entrada_delete{{_id}}'>
						<input type='hidden' name='id' value='{{_id}}'/>
						<input type='submit' value='Borrar'/>
					<form>
				</td>
			</tr>
		</script>

		<div class="container">
					<form id="addCuenta">					
						<label>Nueva cuenta</label><input type="text" name="nombre"/>
						<button class="glyphicon glyphicon-plus" type="submit">
						</button>				
					</form>
			<h4>Cuentas</h4>
			<div id="cuentas"></div>
		</div>
	</body>
</html>